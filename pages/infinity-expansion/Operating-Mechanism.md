# 部分机器的运行机制

## 前言

本部分教程搬运自b站up：[__W1thoutD0ubt](https://space.bilibili.com/88179140)

已获得原作者搬运授权

以下所有机制描述均基于官方英文原版

## 无尽基础材料

这一类中值得一讲的机器只有高级铁砧。

首先需要强调的是，高级铁砧只能合并（或施加）附魔，没有其他功能。

高级铁砧的工作经历了以下过程：

1、确认放入的物品是否满足合并（或施加）附魔的基本要求（具体要求略）；

2、统计两个物品上的附魔；

3、对于两个物品都有的附魔，如果等级一致，就升一级（不会超过设定的上限），如果等级不同，就保留较高的等级。

4、如果用附魔书施加附魔（另一物品不能也是附魔书），则将另一物品支持的所有附魔都施加到此物品上。

5、如果 3、4 两步没有改变附魔，则合并失败。否则合并成功。

这个规则和铁砧的合并规则基本没有区别，除了：

    - 附魔等级上限与原版不同。

    - 相同物品合并附魔时，保留冲突附魔。

以下为高级铁砧**默认**的附魔等级上限：

- 剑的三种加伤附魔：9

- 保护：10

- 时运：6

- 效率：7

- 火焰附加：6

- 力量：7

- 荆棘：13

- 抢夺：6

- 耐久：13

- 其他附魔与原版上限一致。


## 无尽基础机器

自动农场和自动植树机都属于同一种机器——种植机。

种植机的原理比较简单，即每隔一段时间，就根据放入的种子（或树苗）产出对应的物品。

如果一种种子（或树苗）对应多种产物，则这些产物在每次生产时都会同时产出。

举个例子。下图展示的是橡树树苗在植树机中的产出：

[植树机](https://gzassets.cn/minecraft/plugin/slimefun/wiki/addons/images/infinity-expansion/zhishuji.png ':size=25%')

则橡树树苗每次产出：8 个橡树树叶、6 个橡木原木、1 个木棍，1 个苹果。

放入的种子（或树苗）的**数目不影响**每次产出的产物数量，也**不会**加速生产。

举例来说，你在植树机中放入 1 个深色橡树树苗和 64 个深色橡树树苗，植树机依然是每隔**相同**的一段时间生产出 8 个深色橡树树叶 + 6 个深色橡木原木 + 1 个苹果。

升级种植机只减少每次生产所需要的时间。具体耗时如下：

[种植机](https://gzassets.cn/minecraft/plugin/slimefun/wiki/addons/images/infinity-expansion/nongchang.png ':size=25%')

单位：秒

滤网底座和其他机器不同。别的机器都是定时生产，它却是随机生产。

每个粘液刻，含水的滤网底座都有 **(48/k)的-1次方** 的概率生成一次产物（其中 k 为滤网的速率倍数。如果没有滤网，则不会产出物品）。

生产过程如下：

有 1/10000 的概率产出一个马铃薯；

在木棍、沙子、沙砾、下界石英、红石、绿宝石和 9 种矿粉，共计 15 种物品中随机抽取一个物品（铜粉的概率为其他物品的两倍，其余物品概率相等），作为本次生产的产物；

有 **1/(u+3m+1)** 的概率消耗 1 点耐久度，如果耐久度将要耗尽，则改为销毁滤网。

这一步骤完全无视“无法破坏”。公式中 u 为“耐久”附魔的等级，m 为“经验修补”附魔的等级。

## 无尽高级机器

虽然这一部分添加了很多机器，但大部分要么是已有机器的升级，要么是 1 粘液刻工作一次的简单机器，没有什么研究的必要。

这里指只讲一类机器：矿机。

除去功率和速率两个变量，矿机还具有一个隐藏变量：产矿概率。

具体列表如下：

[矿机](https://gzassets.cn/minecraft/plugin/slimefun/wiki/addons/images/infinity-expansion/kuangji.png ':size=25%')

在默认设置下，矿机每过 5 秒，就会进行一次如下过程：

有 p 的概率进行下一步，否则改为生成圆石并结束这一过程，其中 p 为矿机的产矿概率；

若矿机装有生产加速器，则有 50% 的概率生成加速器对应的矿物，并这一结束过程，否则继续下一步；

在奖池中随机选择一种矿物作为待定产物；

如果待定产物是下界岩、下界石英或下界合金锭，但是矿机不在下界，则将待定产物改为圆石；

将待定产物作为最终产物。

每次生成的物品数量等于矿机的速率。

上面提到的奖池，默认组成如下所示：

- 煤炭，权重为 2（虚空矿机中为 3，无尽矿机中为 4）；

- 铁锭，权重为 1；

- 金锭（原版），权重为 1；

- 铜锭（原版，仅 1.17+），权重为 2；

- 红石，权重为 1；

- 青金石，权重为 1；

- 绿宝石，权重为 1；

- 钻石，权重为 1；

- 石英，权重为 0（高级矿机及以上为 1）；

- 下界合金锭，权重为 0（高级矿机及以上为 1）；

- 下界岩，权重为 0（高级矿机及以上为 2）；

## 生物模拟

默认设置下，装有芯片的生物模拟器每 10 秒生产一次物品和经验值。

类似淘金盘，生物模拟器的产出也采用加权随机法。

每次生产只会随机生成**一种**物品。

对于不同的生物芯片，其产出的物品和权重也有所不同。

生物芯片的耗能、产出经验和材质倒是有规律可循。

所有生物芯片可以分为六级，具体数据如下：

[生物芯片](https://gzassets.cn/minecraft/plugin/slimefun/wiki/addons/images/infinity-expansion/xinpian.png ':size=25%')

上面等级的命名，完全是我根据原文直译的，没有任何夹带私货。

生物模拟器每次产出的经验值 芯片的基础经验  经验倍率。

经验倍率可以在经验倍率中修改，默认是 1.0 。

判断生物芯片属于哪个等级，直接看它的功率即可。

这些特性对于无尽科技自己添加的生物芯片都是成立的。

考虑到生物芯片种类繁多，这就不再具体展开了。
